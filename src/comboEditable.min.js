/*
 comboEditable.js

 Copyright 2011, Tim Kellogg
 Dual licensed under the MIT or GPL version 2

 https://github.com/tkellogg/comboEditable
*/
(function(b){b.fn.comboEditable=function(){var f=this.attr("name")?this.attr("name"):"",g=void 0,e=void 0,a=b.map(this.find("option"),function(a){if(a.selected)g=a.value,e=a.innerHTML;return'<div class="ui-state-default" data-value="'+a.value+'" '+ +(a.selected?NaN:0)+">"+a.innerHTML+"</div>"});e||(g=this.find("option").first().val(),e=this.find("option").first().text());var h="";b.each(a,function(a,b){h+=b});var a=b("<div/>"),d=a.append("<div/>").children().first();d.css({position:"relative"});d.append('<input type="text" value="'+
e+'" />');var i=d.find(":text").css({display:"inline",width:this.width()});d.append("<div/>");d=d.find("div").addClass("ui-icon ui-icon-carat-1-s ui-state-default").css({margin:"1px 1px 1px 1px"});d.wrap("<div/>").parent().addClass("ui-state-default").css({position:"relative",top:"2px",right:"1px"}).wrap("<div/>").parent().css({display:"inline",position:"absolute"});a.append('<input type="hidden" value="'+g+'" name="'+f+'" />');var j=a.find('input[type="hidden"]');a.append('<div class="ui-combo-editable-options"/>');
var c=a.find("div.ui-combo-editable-options");c.append(h);c.find("div").css({display:"block",cursor:"default"}).hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")}).css({width:this.width()});c.hide();d.click(function(){c.is(":visible")?c.hide():c.show()}).hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")});a.blur(function(){c.hide()}).attr("tabindex","999").css({outline:"none"});a.keyup(function(a){a.which===
27&&c.hide()});c.find("div").click(function(){c.hide();i.val(b(this).text());j.val(b(this).data("data-value"))});f=this.attr("id");this.replaceWith(a);i.attr("id",f);return a}})(jQuery);
